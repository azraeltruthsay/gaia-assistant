<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GAIA Assistant</title>

  <!-- Icons, Fonts, Code Highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/code-fix.css') }}" />

  <!-- Meta Security -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';">
</head>

<body>
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <h1>ðŸ§  GAIA</h1>
    <button class="nav-btn active" data-tab="chat"><i class="fas fa-comments"></i> <span>Chat</span></button>
    <button class="nav-btn" data-tab="archives"><i class="fas fa-archive"></i> <span>Archives</span></button>
    <button class="nav-btn" data-tab="code"><i class="fas fa-code"></i> <span>Code Tools</span></button>
    <button class="nav-btn" data-tab="projects"><i class="fas fa-project-diagram"></i> <span>Projects</span></button>
    <button class="nav-btn" data-tab="troubleshoot"><i class="fas fa-tools"></i> <span>Diagnostics</span></button>
  </aside>

  <!-- Main Content Area -->
  <main>
    <!-- Status + Persona Info -->
    <div class="status-bar">
      <span id="status-box">Initializing...</span>
      <span id="bg-status-box" style="display:none;"></span>
    </div>

    <!-- Tabs -->
    <section id="chat" class="tab-content active">
      <div id="chat-log" class="chat-log">
        <div class="message gaia"><strong>GAIA:</strong> System initialized. Ready for queries.</div>
      </div>
      <form id="chat-form" class="chat-form">
        <input type="text" id="chat-input" placeholder="Ask GAIA anything..." autocomplete="off" />
        <button type="submit">Send</button>
      </form>
    </section>

    <section id="archives" class="tab-content">
      <div id="archive-list"></div>
      <pre id="archive-viewer" style="display:none;"></pre>
    </section>

    <section id="code" class="tab-content">
      <div class="button-row">
        <button id="btn-analyze-code">Analyze Codebase</button>
        <button id="btn-analyze-functions">Analyze Functions</button>
      </div>
      <pre id="code-summary" style="display:none;"></pre>
      <pre id="function-summary" style="display:none;"></pre>
    </section>

    <section id="projects" class="tab-content">
      <select id="project-dropdown"></select>
    </section>

    <section id="troubleshoot" class="tab-content">
      <div class="diagnostics-container">
        <h2>Diagnostics</h2>
        <div id="diagnostic-panel" class="diagnostic-output">No data yet.</div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.10/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>

  <!-- API & Utilities -->
  <script src="{{ url_for('static', filename='js/api.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/ui.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/project_switcher.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/background_processing_ui.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/code-analyzer.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/conversation_archives.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/troubleshoot.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/chat.js') }}" defer></script>

  <button id="diagnostic-toggle">Toggle Diagnostics</button>

  <!-- Entry Point -->
  <script src="{{ url_for('static', filename='js/startup.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/app.js') }}" defer></script>
  

</body>
</html>
